<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>パスワード生成＆強度診断 | PocketPortal Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        body { font-family: 'Inter', 'Noto Sans JP', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen flex flex-col">

    <nav class="bg-white border-b border-slate-200 py-4 px-6 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <a href="../index.html" class="flex items-center gap-2 font-bold text-lg text-blue-700">
                <span>🏠</span> PocketPortal
            </a>
            <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Security Tools</span>
        </div>
    </nav>

    <header class="bg-white border-b border-slate-100 py-8 px-6">
        <div class="container mx-auto text-center">
            <h1 class="text-2xl font-bold text-slate-800 mb-2">パスワード生成 ＆ 強度診断</h1>
            <p class="text-xs text-slate-500">安全なパスワードの作成と、その強度をシミュレーション</p>
        </div>
    </header>

    <main class="flex-grow container mx-auto py-10 px-6 max-w-2xl">
        <div class="bg-white rounded-3xl shadow-xl border border-slate-100 p-8 mb-8">
            
            <div class="relative mb-8">
                <input type="text" id="password-output" readonly class="w-full p-6 bg-slate-50 border-2 border-slate-100 rounded-2xl text-2xl font-mono text-center tracking-wider text-blue-600 outline-none">
                <button onclick="copyPassword()" class="mt-4 w-full bg-slate-900 hover:bg-slate-800 text-white py-3 rounded-xl font-bold transition-all text-sm">
                    パスワードをコピーする
                </button>
            </div>

            <div class="mb-8 p-6 bg-slate-50 rounded-2xl border border-slate-100">
                <div class="flex justify-between items-end mb-2">
                    <span class="text-xs font-bold text-slate-400">セキュリティ強度</span>
                    <span id="strength-label" class="text-sm font-extrabold">---</span>
                </div>
                <div class="w-full bg-slate-200 h-3 rounded-full overflow-hidden">
                    <div id="strength-bar" class="w-0 h-full transition-all duration-500 bg-slate-400"></div>
                </div>
                <p class="mt-4 text-xs text-slate-500 leading-relaxed">
                    解析にかかる推定時間: <span id="crack-time" class="font-bold text-slate-700">---</span>
                </p>
            </div>

            <div class="grid grid-cols-1 gap-6">
                <div>
                    <div class="flex justify-between mb-2">
                        <label class="text-xs font-bold text-slate-400 uppercase">文字数: <span id="length-val">16</span></label>
                    </div>
                    <input type="range" id="length" min="4" max="32" value="16" oninput="updateAll()" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <label class="flex items-center gap-3 p-3 bg-slate-50 rounded-xl cursor-pointer">
                        <input type="checkbox" id="uppercase" checked onchange="updateAll()" class="w-4 h-4 accent-blue-600">
                        <span class="text-sm font-bold text-slate-600">英大文字</span>
                    </label>
                    <label class="flex items-center gap-3 p-3 bg-slate-50 rounded-xl cursor-pointer">
                        <input type="checkbox" id="numbers" checked onchange="updateAll()" class="w-4 h-4 accent-blue-600">
                        <span class="text-sm font-bold text-slate-600">数字</span>
                    </label>
                    <label class="flex items-center gap-3 p-3 bg-slate-50 rounded-xl cursor-pointer">
                        <input type="checkbox" id="symbols" checked onchange="updateAll()" class="w-4 h-4 accent-blue-600">
                        <span class="text-sm font-bold text-slate-600">記号</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="p-6 bg-gradient-to-br from-indigo-900 to-slate-900 rounded-3xl text-white shadow-xl shadow-indigo-100">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-indigo-500 text-[10px] font-bold px-2 py-1 rounded">AD</span>
                <p class="text-xs font-bold text-indigo-300 uppercase tracking-widest">Enhanced Protection</p>
            </div>
            <a href="https://af.moshimo.com/..." target="_blank" class="block group">
                <div class="bg-white/10 p-5 rounded-2xl border border-white/10 group-hover:border-indigo-400 transition-all text-left">
                    <p class="text-base font-bold text-white mb-2 flex items-center justify-between">
                        究極のセキュリティ対策「ノートン」
                        <span class="text-indigo-400 group-hover:translate-x-1 transition-transform">→</span>
                    </p>
                    <p class="text-xs text-slate-300 leading-relaxed">
                        強力なパスワードを作っても、フリーWi-Fiやフィッシング詐欺は防げません。デバイス全体の保護で、あなたの個人情報を徹底ガード。
                    </p>
                </div>
            </a>
            <div class="mt-4 flex justify-around text-[10px] text-slate-400 font-bold">
                <span>🛡️ ウイルス対策</span>
                <span>🔐 VPN通信</span>
                <span>🕵️ 個人情報監視</span>
            </div>
        </div>
    </main>

    <footer class="py-8 text-center text-slate-400 text-[10px]">
        <p>© 2024 PocketPortal Tools - パスワード情報は保存されません</p>
    </footer>

    <script>
        const chars = {
            lower: 'abcdefghijklmnopqrstuvwxyz',
            upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            numbers: '0123456789',
            symbols: '!@#$%^&*()_+~`|}{[]:;?><,./-='
        };

        function updateAll() {
            const length = document.getElementById('length').value;
            document.getElementById('length-val').innerText = length;
            generate();
        }

        function generate() {
            const length = document.getElementById('length').value;
            const useUpper = document.getElementById('uppercase').checked;
            const useNumbers = document.getElementById('numbers').checked;
            const useSymbols = document.getElementById('symbols').checked;

            let pool = chars.lower;
            if (useUpper) pool += chars.upper;
            if (useNumbers) pool += chars.numbers;
            if (useSymbols) pool += chars.symbols;

            let password = '';
            for (let i = 0; i < length; i++) {
                password += pool.charAt(Math.floor(Math.random() * pool.length));
            }

            document.getElementById('password-output').value = password;
            checkStrength(password, pool.length);
        }

        function checkStrength(pwd, poolSize) {
            const bar = document.getElementById('strength-bar');
            const label = document.getElementById('strength-label');
            const timeSpan = document.getElementById('crack-time');

            // 強度計算の簡略ロジック（エントロピー）
            const entropy = pwd.length * Math.log2(poolSize);
            
            let color = 'bg-red-500';
            let text = '危険';
            let time = '1秒未満';
            let width = '20%';

            if (entropy > 80) {
                color = 'bg-green-500'; text = '最強'; time = '100年以上'; width = '100%';
            } else if (entropy > 60) {
                color = 'bg-emerald-400'; text = '安全'; time = '約5年'; width = '80%';
            } else if (entropy > 40) {
                color = 'bg-yellow-400'; text = '普通'; time = '約3ヶ月'; width = '50%';
            } else if (entropy > 25) {
                color = 'bg-orange-400'; text = '弱い'; time = '数時間'; width = '30%';
            }

            bar.className = `h-full transition-all duration-500 ${color}`;
            bar.style.width = width;
            label.innerText = text;
            label.className = `text-sm font-extrabold ${color.replace('bg-', 'text-')}`;
            timeSpan.innerText = time;
        }

        function copyPassword() {
            const output = document.getElementById('password-output');
            navigator.clipboard.writeText(output.value).then(() => {
                const btn = event.target;
                const original = btn.innerText;
                btn.innerText = "✅ コピーしました！";
                setTimeout(() => btn.innerText = original, 2000);
            });
        }

        // 初期実行
        updateAll();
    </script>
</body>
</html>