<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AgriHelper Pro</title>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9V96DZHTH1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-9V96DZHTH1');</script>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6758339830570094" crossorigin="anonymous"></script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        body { font-family: -apple-system, sans-serif; background: #f1f5f9; -webkit-tap-highlight-color: transparent; }
        .task-card { background: white; border-radius: 20px; border: 1px solid #e2e8f0; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .modal-overlay { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(4px); }
        .weather-stamp { font-size: 0.65rem; color: #059669; font-weight: bold; margin-right: 8px; }
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; border-top: 1px solid #ccc; display: flex; justify-content: space-around; padding: 10px; padding-bottom: env(safe-area-inset-bottom); z-index: 100; }
        .nav-btn { background: none; border: none; font-size: 1.4rem; cursor: pointer; display: flex; flex-direction: column; align-items: center; flex: 1; color: #64748b; }
        .nav-btn span { font-size: 0.6rem; margin-top: 2px; font-weight: bold; }
        .nav-btn.active { color: #059669; }
        .editable-name:focus { outline: none; background: #f0fdf4; border-bottom: 1px solid #10b981; }
        .action-menu { position: absolute; right: 0; top: 100%; background: white; border: 1px solid #e2e8f0; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); z-index: 200; width: 140px; }
        .action-menu button { width: 100%; text-align: left; padding: 10px 16px; font-size: 12px; font-weight: bold; border-bottom: 1px solid #f1f5f9; }
        .action-menu button:last-child { border: none; color: #ef4444; }
    </style>
</head>
<body class="pb-32">

    <nav class="bg-white border-b border-slate-200 py-3 px-4 sticky top-0 z-50 flex justify-between items-center">
        <a href="./index.html" class="flex items-center gap-1 font-bold text-emerald-700 text-sm">ğŸ  PocketPortal</a>
        <div class="text-right">
            <h1 class="text-sm font-black italic tracking-tighter leading-none text-slate-700">AgriHelper <span class="text-emerald-500">Pro</span></h1>
            <p id="addrDisplay" class="text-[9px] font-bold opacity-50 uppercase">Waiting GPS...</p>
        </div>
        <a href="./index.html" class="text-[10px] text-slate-400 font-bold hover:text-emerald-500">ãƒ„ãƒ¼ãƒ«é›†ã¸</a>
    </nav>

    <main id="mainList" class="p-4 max-w-xl mx-auto space-y-4"></main>

    <div class="w-full flex flex-col items-center py-8 bg-slate-50 border-t border-slate-200 mt-10">
        <p class="text-[8px] text-slate-400 font-bold mb-2 tracking-widest uppercase">Sponsor Link</p>
        <div class="scale-90 origin-top">
            <script type="text/javascript">rakuten_design="slide";rakuten_affiliateId="022cbf82.9ae811c1.06d2eb59.bd2a4ff3";rakuten_items="ctsmatch";rakuten_genreId="0";rakuten_size="300x160";rakuten_target="_blank";rakuten_theme="gray";rakuten_border="off";rakuten_auto_mode="on";rakuten_genre_title="off";rakuten_recommend="on";</script>
            <script type="text/javascript" src="https://xml.affiliate.rakuten.co.jp/widget/js/rakuten_widget.js?20230106"></script>
        </div>
    </div>

    <div class="bottom-nav">
        <button class="nav-btn active" onclick="render()"><i class="bi bi-house-door-fill"></i><span>ãƒ›ãƒ¼ãƒ </span></button>
        <button class="nav-btn" onclick="openRegModal()"><i class="bi bi-plus-circle-fill" style="color:#059669; font-size: 1.8rem; margin-top:-5px;"></i><span>æ–°è¦ä½œæˆ</span></button>
        <button class="nav-btn" onclick="openHelp()"><i class="bi bi-shield-check"></i><span>ãƒ‡ãƒ¼ã‚¿ç®¡ç†</span></button>
    </div>

    <div id="regModal" class="fixed inset-0 modal-overlay z-[150] hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-[28px] w-full max-w-md p-6 shadow-2xl">
            <h2 class="text-lg font-black mb-4 text-emerald-800 italic">æ ½åŸ¹è¨ˆç”»ã®ç™»éŒ²</h2>
            <div class="space-y-3">
                <select id="cropSelect" class="w-full bg-slate-100 p-3 rounded-xl font-bold text-sm"></select>
                <input type="text" id="varietyInput" placeholder="å“ç¨®å" class="w-full bg-slate-100 p-3 rounded-xl text-sm outline-none">
                <input type="text" id="fieldInput" placeholder="å ´æ‰€ãƒ»åœƒå ´" class="w-full bg-slate-100 p-3 rounded-xl text-sm outline-none">
                <div class="bg-emerald-50 p-4 rounded-xl">
                    <div class="flex gap-2 mb-2">
                        <button id="modeStart" onclick="setRegMode('start')" class="flex-1 py-2 rounded-lg text-[10px] font-black bg-emerald-600 text-white">é–‹å§‹æ—¥åŸºæº–</button>
                        <button id="modeEnd" onclick="setRegMode('end')" class="flex-1 py-2 rounded-lg text-[10px] font-black bg-slate-200 text-slate-500">åç©«æ—¥ã‹ã‚‰é€†ç®—</button>
                    </div>
                    <input type="date" id="baseDateInput" class="w-full p-2 rounded-lg font-bold border-none outline-none">
                </div>
                <div class="flex gap-2 pt-2">
                    <button onclick="closeRegModal()" class="flex-1 py-3 font-bold text-slate-400">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button onclick="saveNewCrop()" class="flex-1 bg-emerald-600 text-white font-black py-3 rounded-xl">ç™»éŒ²ã™ã‚‹</button>
                </div>
            </div>
        </div>
    </div>

    <div id="helpModal" class="fixed inset-0 modal-overlay z-[220] hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-[32px] w-full max-w-sm max-h-[85vh] overflow-y-auto p-6 shadow-2xl">
            <h3 class="text-xl font-black mb-6 border-b pb-2 text-slate-800 italic">ãƒ˜ãƒ«ãƒ—ãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</h3>
            
            <section class="mb-6">
                <h4 class="font-bold text-emerald-600 mb-2 text-sm"><i class="bi bi-patch-check-fill mr-1"></i> ã‚¢ãƒ—ãƒªã®ä½¿ã„ã“ãªã—æ–¹</h4>
                <div class="text-[11px] text-slate-500 space-y-2 leading-relaxed font-medium">
                    <p>ãƒ»<b>é€†ç®—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°:</b> ã€Œåç©«æ—¥ã‹ã‚‰é€†ç®—ã€ã‚’é¸ã‚“ã§ç™»éŒ²ã™ã‚‹ã¨ã€ç›®æ¨™ã®åç©«æ™‚æœŸã‹ã‚‰é€†ç®—ã—ã¦ã€Œã„ã¤ç¨®ã‚’ã¾ãã¹ãã‹ã€ãŒè‡ªå‹•è¨ˆç®—ã•ã‚Œã¾ã™ã€‚</p>
                    <p>ãƒ»<b>ç¾å ´ã®ã€Œä»Šã€ã‚’è¨˜éŒ²:</b> ãƒã‚§ãƒƒã‚¯ã‚’ã‚¿ãƒƒãƒ—ã—ãŸç¬é–“ã®<b>æ—¥ä»˜ãƒ»æ™‚åˆ»ãƒ»æ°—æ¸©ãƒ»å¤©æ°—</b>ã‚’è‡ªå‹•ã‚¹ã‚¿ãƒ³ãƒ—ã€‚å¾Œã‹ã‚‰ã€Œå»å¹´ã®ã“ã®ä½œæ¥­ã®æ™‚ã¯é›¨ã ã£ãŸã€ã¨æŒ¯ã‚Šè¿”ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚</p>
                    <p>ãƒ»<b>å·¥ç¨‹ã®è‡ªç”±ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º:</b> å³ç«¯ã®ã€Œï¸™ã€ã‹ã‚‰ã€ç‹¬è‡ªã®è¿½è‚¥ã‚„é˜²é™¤ã®å·¥ç¨‹ã‚’å‰å¾Œã«è¿½åŠ ã—ãŸã‚Šã€ä¸è¦ãªå·¥ç¨‹ã‚’å‰Šé™¤ã—ã¦ã€è‡ªåˆ†ã ã‘ã®æ ½åŸ¹æš¦ï¼ˆãƒã‚¤ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼‰ã‚’ä½œã‚Œã¾ã™ã€‚</p>
                    <p>ãƒ»<b>ä¾¿åˆ©ãªãƒ¡ãƒ¢æ©Ÿèƒ½:</b> ã€Œï¸™ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒ¡ãƒ¢æ©Ÿèƒ½ã‚’ä½¿ãˆã°ã€ä½¿ã£ãŸè¾²è–¬ã®å€ç‡ã‚„è‚¥æ–™ã®é‡ã€è‹—ã®çŠ¶æ…‹ãªã©ã‚’ç´°ã‹ãè¨˜éŒ²ã—ã¦ãŠã‘ã¾ã™ã€‚</p>
                    <p>ãƒ»<b>å¹´åº¦ã‚³ãƒ”ãƒ¼:</b> æ¥å¹´ã‚‚åŒã˜å ´æ‰€ãƒ»åŒã˜å“ç¨®ã‚’è‚²ã¦ã‚‹ãªã‚‰ã€Œæ¬¡æœŸã¸ã‚³ãƒ”ãƒ¼ã€ãŒä¾¿åˆ©ã€‚æ—¥ä»˜ãŒ1å¹´å¾Œã«ã‚¹ãƒ©ã‚¤ãƒ‰ã•ã‚Œã‚‹ã®ã§ã€è¨ˆç”»ç«‹ã¦ãŒæ•°ç§’ã§çµ‚ã‚ã‚Šã¾ã™ã€‚</p>
                </div>
            </section>

            <section class="mb-6">
                <h4 class="font-bold text-blue-600 mb-2 text-sm"><i class="bi bi-share-fill mr-1"></i> ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ãƒ»å…±æœ‰</h4>
                <p class="text-[11px] text-slate-500 mb-3 font-medium">ç¾åœ¨ã®å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦æ›¸ãå‡ºã—ã¾ã™ã€‚æ©Ÿç¨®å¤‰æ›´æ™‚ã‚„ã€å®¶æ—ã¨ã®å…±æœ‰ã«ä¾¿åˆ©ã§ã™ã€‚LINEã‚„è‡ªåˆ†å®›ãƒ¡ãƒ¼ãƒ«ã«é€ã£ã¦ãŠãã¨å®‰å…¨ã§ã™ã€‚</p>
                <button onclick="exportAndShare()" class="w-full py-3 bg-blue-600 text-white rounded-xl font-bold text-sm shadow-md active:scale-95 transition-transform">
                    ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä¿å­˜ãƒ»å…±æœ‰
                </button>
            </section>

            <section class="mb-6 border-t pt-4">
                <h4 class="font-bold text-orange-600 mb-2 text-sm"><i class="bi bi-arrow-repeat mr-1"></i> ãƒ‡ãƒ¼ã‚¿ã®å¾©å…ƒ</h4>
                <p class="text-[11px] text-slate-500 mb-3 font-medium">ä¿å­˜ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚<br><span class="text-red-500 font-bold">â€»ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãã•ã‚Œã‚‹ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚</span></p>
                <button onclick="document.getElementById('importFile').click()" class="w-full py-3 bg-orange-500 text-white rounded-xl font-bold text-sm shadow-md active:scale-95 transition-transform">
                    ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§å¾©å…ƒ
                </button>
                <input type="file" id="importFile" class="hidden" onchange="importData(event)">
            </section>

            <section class="mb-6 bg-red-50 p-3 rounded-lg border border-red-100">
                <h4 class="font-bold text-red-700 mb-1 text-[11px]">ğŸ›¡ å…è²¬äº‹é …</h4>
                <p class="text-[10px] text-red-600 leading-tight">æœ¬ã‚¢ãƒ—ãƒªã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®ä¿å­˜é ˜åŸŸã‚’ä½¿ç”¨ã—ã¾ã™ã€‚å±¥æ­´æ¶ˆå»ã‚„ç«¯æœ«ã®ç©ºãå®¹é‡ä¸è¶³ã«ã‚ˆã‚Šãƒ‡ãƒ¼ã‚¿ãŒæ¶ˆãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€é‡è¦ãªè¨˜éŒ²ã¯å¿…ãšãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚æ¶ˆå¤±ã«ã‚ˆã‚‹è²¬ä»»ã¯è² ã„ã‹ã­ã¾ã™ã€‚</p>
            </section>

            <button onclick="closeHelp()" class="w-full py-3 border border-slate-200 text-slate-400 font-bold rounded-xl text-sm mt-2">é–‰ã˜ã‚‹</button>
        </div>
    </div>

    <script>
const MASTER = {
  "crops": {
    "ç©€ç‰©ãƒ»å·¥èŠ¸": {
      "kome": { "name": "ãŠç±³(æ°´ç¨²)", "tasks": ["ç¨®ã¾ã", "ç”°æ¤ãˆ", "ä¸­å¹²ã—", "å‡ºç©‚", "ç¨²åˆˆã‚Š"], "intervals": [0, 30, 45, 45, 40], "varieties": ["ã‚³ã‚·ãƒ’ã‚«ãƒª", "ã¤ã‚„å§«"], "hint": "ã€é˜²é™¤ã€‘ã„ã‚‚ã¡ç—… ã€è‚¥æ–™ã€‘æ°´ç¨²å°‚ç”¨" },
      "mugi": { "name": "éº¦(å°éº¦ãƒ»å¤§éº¦)", "tasks": ["æ’­ç¨®", "éº¦è¸ã¿", "è¿½è‚¥", "èµ¤ã‹ã³ç—…é˜²é™¤", "åç©«"], "intervals": [0, 60, 60, 45, 45], "varieties": ["ã‚†ã‚ã¡ã‹ã‚‰"], "hint": "ã€é˜²é™¤ã€‘èµ¤ã‹ã³ç—… ã€è‚¥æ–™ã€‘2ã€œ3æœˆã®è¿½è‚¥" },
      "soba": { "name": "ãã°", "tasks": ["æ’­ç¨®", "é–‹èŠ±", "åç©«"], "intervals": [0, 40, 40], "varieties": ["ä¿¡æ¿ƒ1å·"], "hint": "çª’ç´ éå¤šã«æ³¨æ„ï¼ˆå€’ä¼é˜²æ­¢ï¼‰" },
      "sugarcane": { "name": "ã‚µãƒˆã‚¦ã‚­ãƒ“", "tasks": ["æ¤ä»˜ã‘", "åŸ¹åœŸ", "è¿½è‚¥", "åç©«"], "intervals": [0, 120, 90, 240], "varieties": ["è¾²æ—21å·"], "hint": "ã€é˜²é™¤ã€‘ãƒ¡ã‚¤ãƒãƒ¥ã‚¦é¡ ã€è‚¥æ–™ã€‘åˆ†è‚¥é‡è¦–" },
      "igusa": { "name": "ã„è‰", "tasks": ["å®šæ¤", "å…ˆåˆˆã‚Š", "ç¶²ä¸Šã’", "åç©«", "æ³¥æŸ“ã‚"], "intervals": [0, 120, 60, 60, 0], "varieties": ["ã²ã®ã¿ã©ã‚Š"], "hint": "ã€é˜²é™¤ã€‘ã‚¤ã‚°ã‚µã‚·ãƒ³ã‚¯ã‚¤ ã€è‚¥æ–™ã€‘æœ‰æ©Ÿè³ª" },
      "daizu": { "name": "å¤§è±†", "tasks": ["æ’­ç¨®", "ä¸­è€•ãƒ»åœŸå¯„ã›", "åç©«"], "intervals": [0, 40, 80], "varieties": ["ãƒ•ã‚¯ãƒ¦ã‚¿ã‚«"], "hint": "ã€é˜²é™¤ã€‘ã‚«ãƒ¡ãƒ ã‚· ã€è‚¥æ–™ã€‘æ ¹ç²’èŒã‚’æ´»ã‹ã™" },
      "natane": { "name": "èœç¨®", "tasks": ["æ’­ç¨®", "é–“å¼•ã", "åç©«"], "intervals": [0, 30, 210], "varieties": ["ã‚­ã‚¶ã‚­ãƒãƒŠã‚¿ãƒ"], "hint": "ã€é˜²é™¤ã€‘ã‚¢ãƒ–ãƒ©ãƒ ã‚· ã€è‚¥æ–™ã€‘å…ƒè‚¥é‡è¦–" },
      "ocha": { "name": "èŒ¶", "tasks": ["ä¸€ç•ªèŒ¶", "æ•´æ", "äºŒç•ªèŒ¶", "ç§‹æ•´æ"], "intervals": [0, 15, 45, 90], "varieties": ["ã‚„ã¶ããŸ"], "hint": "ã€é˜²é™¤ã€‘ãƒãƒ£ãƒãƒ›ã‚½ã‚¬ ã€è‚¥æ–™ã€‘çª’ç´ å¤šã‚" },
      "tobacco": { "name": "è‘‰ãŸã°ã“", "tasks": ["å®šæ¤", "èŠ¯æ­¢ã‚", "ã‚ãèŠ½ã‹ã", "åç©«"], "intervals": [0, 60, 30, 30], "varieties": ["é»„è‰²ç¨®"], "hint": "ã€é˜²é™¤ã€‘ç–«ç—… ã€è‚¥æ–™ã€‘å°‚ç”¨è‚¥æ–™" }
    },
    "å®Ÿç‰©é‡èœ": {
      "tomato": { "name": "ãƒˆãƒãƒˆ", "tasks": ["å®šæ¤", "ã‚ãèŠ½ã‹ã", "èª˜å¼•", "åç©«é–‹å§‹"], "intervals": [0, 15, 10, 45], "varieties": ["æ¡ƒå¤ªéƒ", "éº—å¤"], "hint": "ã†ã©ã‚“ã“ç—…æ³¨æ„ã€‚æ®µãŠãã®è¿½è‚¥" },
      "nasu": { "name": "ãƒŠã‚¹", "tasks": ["å®šæ¤", "ä»•ç«‹ã¦", "åç©«é–‹å§‹", "æ›´æ–°å‰ªå®š", "ç§‹åç©«"], "intervals": [0, 20, 30, 40, 30], "varieties": ["åƒä¸¡äºŒå·"], "hint": "æ°´åˆ‡ã‚Œè‚¥æ–™åˆ‡ã‚Œæ³¨æ„ã€‚ãƒãƒ€ãƒ‹é˜²é™¤" },
      "kyuri": { "name": "ã‚­ãƒ¥ã‚¦ãƒª", "tasks": ["å®šæ¤", "ãƒãƒƒãƒˆå¼µã‚Š", "åç©«é–‹å§‹", "åç©«çµ‚äº†"], "intervals": [0, 10, 25, 60], "varieties": ["å¤ã™ãšã¿"], "hint": "ãƒ™ãƒˆç—…æ³¨æ„ã€‚å°‘é‡å¤šå›æ•°ã®è¿½è‚¥" },
      "piman": { "name": "ãƒ”ãƒ¼ãƒãƒ³", "tasks": ["å®šæ¤", "æ•´æ", "åç©«é–‹å§‹"], "intervals": [0, 20, 30], "varieties": ["äº¬æ³¢"], "hint": "ç¶™ç¶šçš„ãªè¿½è‚¥ãŒå¿…è¦" },
      "shishito": { "name": "ã‚·ã‚·ãƒˆã‚¦", "tasks": ["å®šæ¤", "æ•´æ", "åç©«é–‹å§‹"], "intervals": [0, 20, 25], "varieties": ["åœŸä½ç”˜ã¨ã†"], "hint": "ä¹¾ç‡¥é˜²æ­¢ã€‚ãƒãƒ€ãƒ‹æ³¨æ„" },
      "paprika": { "name": "ãƒ‘ãƒ—ãƒªã‚«", "tasks": ["å®šæ¤", "èª˜å¼•", "é–‹èŠ±", "åç©«é–‹å§‹"], "intervals": [0, 20, 20, 60], "varieties": ["ãƒ•ãƒ«ãƒ¼ãƒ”ãƒ¼"], "hint": "é–‹èŠ±ã‹ã‚‰åç©«ã¾ã§ãŒé•·ã„" },
      "pumpkin": { "name": "ã‚«ãƒœãƒãƒ£", "tasks": ["æ’­ç¨®", "å®šæ¤", "äººå·¥æˆç²‰", "åç©«"], "intervals": [0, 30, 35, 45], "varieties": ["ãˆã³ã™"], "hint": "ã†ã©ã‚“ã“ç—…æ³¨æ„ã€‚åç©«å¾Œè¿½ç†Ÿ" },
      "suika": { "name": "ã‚¹ã‚¤ã‚«", "tasks": ["å®šæ¤", "æ‘˜å¿ƒ", "ç‰ç›´ã—", "åç©«"], "intervals": [0, 20, 45, 45], "varieties": ["ç¾…çš‡"], "hint": "ã¤ã‚‹ãƒœã‚±æ³¨æ„ã€‚ç©ç®—æ¸©åº¦ã§ç®¡ç†" },
      "melon": { "name": "ãƒ¡ãƒ­ãƒ³", "tasks": ["å®šæ¤", "äº¤é…", "ãƒãƒƒãƒˆå‡ºã—", "åç©«"], "intervals": [0, 40, 15, 55], "varieties": ["ã‚¢ãƒ³ãƒ‡ã‚¹"], "hint": "ãƒãƒƒãƒˆå½¢æˆæœŸã®æ°´ç®¡ç†ãŒé‡è¦" },
      "strawberry": { "name": "ã‚¤ãƒã‚´", "tasks": ["è¦ªæ ªå®šæ¤", "è‹—ä½œã‚Š", "æœ¬ç”°å®šæ¤", "åç©«é–‹å§‹", "åç©«çµ‚äº†"], "intervals": [0, 60, 90, 60, 150], "varieties": ["ã‚ã¾ãŠã†"], "hint": "ãƒãƒ€ãƒ‹é˜²é™¤ã€‚ãƒãƒ«ãƒå‰è¿½è‚¥" },
      "okra": { "name": "ã‚ªã‚¯ãƒ©", "tasks": ["å®šæ¤", "ä¸‹è‘‰ã‹ã", "åç©«é–‹å§‹"], "intervals": [0, 45, 15], "varieties": ["äº”è§’ã‚ªã‚¯ãƒ©"], "hint": "åˆæœŸç”Ÿè‚²é‡è¦–ã€‚æ¯æ—¥åç©«" },
      "corn": { "name": "ãƒˆã‚¦ãƒ¢ãƒ­ã‚³ã‚·", "tasks": ["æ’­ç¨®", "è¿½è‚¥", "é™¤æˆ¿", "åç©«"], "intervals": [0, 30, 30, 30], "varieties": ["ã‚´ãƒ¼ãƒ«ãƒ‰ãƒ©ãƒƒã‚·ãƒ¥"], "hint": "ã‚¢ãƒ¯ãƒãƒ¡ã‚¤ã‚¬é˜²é™¤ã€‚é›„ç©‚å‡ºå§‹ã‚ã«è¿½è‚¥" },
      "edamame": { "name": "æè±†", "tasks": ["æ’­ç¨®", "é³¥ã‚ˆã‘", "é–‹èŠ±", "åç©«"], "intervals": [0, 10, 40, 35], "varieties": ["ã ã ã¡ã‚ƒè±†"], "hint": "é–‹èŠ±æœŸã®æ°´åˆ‡ã‚Œå³ç¦" },
      "soramame": { "name": "ãã‚‰è±†", "tasks": ["æ’­ç¨®", "æ•´æ", "åç©«"], "intervals": [0, 150, 50], "varieties": ["é§’æ „"], "hint": "ã‚¢ãƒ–ãƒ©ãƒ ã‚·æ³¨æ„ã€‚ãƒªãƒ³é…¸å¤šã‚" },
      "endou": { "name": "ãˆã‚“ã©ã†è±†", "tasks": ["æ’­ç¨®", "æ”¯æŸ±ç«‹ã¦", "åç©«é–‹å§‹"], "intervals": [0, 120, 60], "varieties": ["ã‚¹ãƒŠãƒƒã‚¯"], "hint": "ã†ã©ã‚“ã“ç—…æ³¨æ„ã€‚é€£ä½œéšœå®³ã‚ã‚Š" },
      "ingen": { "name": "ã„ã‚“ã’ã‚“", "tasks": ["æ’­ç¨®", "åç©«é–‹å§‹"], "intervals": [0, 60], "varieties": ["ã‚±ãƒ³ã‚¿ãƒƒã‚­ãƒ¼"], "hint": "çŸ­æœŸæ±ºæˆ¦ã€‚ãƒãƒ€ãƒ‹æ³¨æ„" },
      "tougan": { "name": "å†¬ç“œ", "tasks": ["å®šæ¤", "åç©«"], "intervals": [0, 120], "varieties": ["ç‰çƒ"], "hint": "æ”¾ä»»å¯èƒ½ã€‚ã‚«ãƒ¡ãƒ ã‚·æ³¨æ„" },
      "nigauri": { "name": "ã‚´ãƒ¼ãƒ¤", "tasks": ["å®šæ¤", "ãƒãƒƒãƒˆå¼µã‚Š", "åç©«é–‹å§‹"], "intervals": [0, 20, 60], "varieties": ["ã‚ã°ã—"], "hint": "æ°´ã¨å †è‚¥ã‚’å¥½ã‚€" },
      "zucchini": { "name": "ã‚ºãƒƒã‚­ãƒ¼ãƒ‹", "tasks": ["å®šæ¤", "åç©«é–‹å§‹", "åç©«çµ‚äº†"], "intervals": [0, 35, 60], "varieties": ["ãƒ€ã‚¤ãƒŠãƒ¼"], "hint": "äººå·¥æˆç²‰ã§ç¢ºå®Ÿã«ç€æœ" },
      "tougarashi": { "name": "å”è¾›å­", "tasks": ["å®šæ¤", "åç©«é–‹å§‹", "åç©«çµ‚äº†"], "intervals": [0, 60, 90], "varieties": ["é·¹ã®çˆª"], "hint": "ä¹¾ç‡¥æ°—å‘³ã«è‚²ã¦ã‚‹ã¨è¾›å‘³å¢—" }
    },
    "è‘‰ç‰©ãƒ»èŒèœé¡": {
      "hakusai": { "name": "ãƒã‚¯ã‚µã‚¤", "tasks": ["å®šæ¤", "è¿½è‚¥", "çµçƒé–‹å§‹", "åç©«"], "intervals": [0, 20, 30, 40], "varieties": ["é»„ã”ã“ã‚"], "hint": "ãƒ¨ãƒˆã‚¦ãƒ ã‚·æ³¨æ„ã€‚çµçƒåˆæœŸè¿½è‚¥" },
      "cabbage": { "name": "ã‚­ãƒ£ãƒ™ãƒ„", "tasks": ["å®šæ¤", "åœŸå¯„ã›", "åç©«"], "intervals": [0, 30, 70], "varieties": ["é‡‘ç³»201å·"], "hint": "ã‚³ãƒŠã‚¬é˜²é™¤ã€‚å…ƒè‚¥é‡è¦–" },
      "horenso": { "name": "ã»ã†ã‚Œã‚“è‰", "tasks": ["æ’­ç¨®", "åç©«"], "intervals": [0, 45], "varieties": ["ã‚¯ãƒ­ãƒã‚¹"], "hint": "é…¸åº¦èª¿æ•´ï¼ˆpH6.5ï¼‰å¿…é ˆ" },
      "komatsuna": { "name": "å°æ¾èœ", "tasks": ["æ’­ç¨®", "åç©«"], "intervals": [0, 35], "varieties": ["æ¥½å¤©"], "hint": "ã‚«ãƒ–ãƒ©ãƒãƒãƒæ³¨æ„ã€‚å…ƒè‚¥ã®ã¿" },
      "lettuce": { "name": "ãƒ¬ã‚¿ã‚¹", "tasks": ["å®šæ¤", "åç©«"], "intervals": [0, 70], "varieties": ["ã‚µãƒ‹ãƒ¼ãƒ¬ã‚¿ã‚¹"], "hint": "è…æ•—ç—…æ³¨æ„ã€‚å¤–è‘‰ã‚’è‚²ã¦ã‚‹" },
      "negi": { "name": "ç™½ãƒã‚®", "tasks": ["å®šæ¤", "åœŸå¯„ã›1å›", "åœŸå¯„ã›2å›", "åç©«"], "intervals": [0, 60, 60, 60], "varieties": ["çŸ³å€‰ä¸€æœ¬"], "hint": "åœŸå¯„ã›ã®ãŸã³ã«è¿½è‚¥" },
      "nira": { "name": "ãƒ‹ãƒ©", "tasks": ["å®šæ¤/åˆˆå–ã‚Š", "ãŠç¤¼è‚¥"], "intervals": [0, 60], "varieties": ["ã‚°ãƒªãƒ¼ãƒ³ãƒ™ãƒ«ãƒˆ"], "hint": "åç©«å¾Œå³è¿½è‚¥ã§å›å¾©" },
      "broccoli": { "name": "ãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼", "tasks": ["å®šæ¤", "é ‚èŠ±è•¾åç©«", "å´æåç©«"], "intervals": [0, 70, 30], "varieties": ["ãƒã‚¤ãƒ„SP"], "hint": "ãƒœãƒ­ãƒ³æ¬ ä¹ã«ã‚ˆã‚‹èŒç©ºæ´åŒ–æ³¨æ„" },
      "cauliflower": { "name": "ã‚«ãƒªãƒ•ãƒ©ãƒ¯ãƒ¼", "tasks": ["å®šæ¤", "è‘‰æŠ˜(é®å…‰)", "åç©«"], "intervals": [0, 80, 30], "varieties": ["ã‚¹ãƒãƒ¼ã‚¯ãƒ©ã‚¦ãƒ³"], "hint": "åˆæœŸæˆè‚²ã‚’æ­¢ã‚ã¦ã¯ã„ã‘ãªã„" },
      "chingensai": { "name": "ãƒãƒ³ã‚²ãƒ³ã‚µã‚¤", "tasks": ["æ’­ç¨®", "åç©«"], "intervals": [0, 45], "varieties": ["é’å¸"], "hint": "ã‚¢ãƒ–ãƒ©ãƒ ã‚·æ³¨æ„ã€‚çª’ç´ å¤šã‚" },
      "mizuna": { "name": "æ°´èœ", "tasks": ["æ’­ç¨®", "åç©«"], "intervals": [0, 40], "varieties": ["äº¬ã¿ãã‚Œ"], "hint": "ã‚³ãƒŠã‚¬æ³¨æ„ã€‚å…ƒè‚¥ä¸»ä½“" },
      "shunigiku": { "name": "æ˜¥èŠ", "tasks": ["æ’­ç¨®", "æ‘˜ã¿å–ã‚Šåç©«"], "intervals": [0, 60], "varieties": ["ä¸­è‘‰"], "hint": "ã‚¢ãƒ–ãƒ©ãƒ ã‚·æ³¨æ„ã€‚æ¶²è‚¥è¿½è‚¥" },
      "aspara": { "name": "ã‚¢ã‚¹ãƒ‘ãƒ©ã‚¬ã‚¹", "tasks": ["æ˜¥åç©«", "ç«‹èŒ", "ãŠç¤¼è‚¥"], "intervals": [0, 60, 20], "varieties": ["ã‚¦ã‚§ãƒ«ã‚«ãƒ "], "hint": "å †è‚¥ãŸã£ã·ã‚Šã¨ã€‚èŒæ¯ç—…æ³¨æ„" },
      "seri": { "name": "ã‚»ãƒª", "tasks": ["å®šæ¤", "æ°´ç®¡ç†", "åç©«"], "intervals": [0, 90, 60], "varieties": ["å³¶æ ¹åœ¨æ¥"], "hint": "æ¹¿åœ°ç®¡ç†ã€‚ä¹¾ç‡¥å³ç¦" },
      "nanohana": { "name": "èœã®èŠ±", "tasks": ["æ’­ç¨®", "æ‘˜å¿ƒ", "åç©«"], "intervals": [0, 90, 30], "varieties": ["èŠ±èœ"], "hint": "ã‚³ãƒŠã‚¬æ³¨æ„ã€‚æ˜¥å…ˆã®è¿½è‚¥" },
      "shiso": { "name": "å¤§è‘‰/ã‚·ã‚½", "tasks": ["å®šæ¤", "æ‘˜å¿ƒ", "åç©«"], "intervals": [0, 30, 30], "varieties": ["é’ã—ã"], "hint": "ãƒãƒ€ãƒ‹æ³¨æ„ã€‚æ°´åˆ‡ã‚Œå³ç¦" },
      "mitsuba": { "name": "ä¸‰ã¤è‘‰", "tasks": ["æ’­ç¨®", "é®å…‰", "åç©«"], "intervals": [0, 45, 15], "varieties": ["ç³¸ä¸‰ã¤è‘‰"], "hint": "åŠæ—¥é™°ç®¡ç†ã€‚ã‚¢ãƒ–ãƒ©ãƒ ã‚·æ³¨æ„" },
      "celery": { "name": "ã‚»ãƒ­ãƒª", "tasks": ["å®šæ¤", "ã‚ãèŠ½ã‹ã", "åç©«"], "intervals": [0, 60, 60], "varieties": ["ã‚³ãƒ¼ãƒãƒ«"], "hint": "è‚¥æ–™ã¨æ°´ã‚’å¥½ã‚€ã€‚æ–‘ç‚¹ç—…æ³¨æ„" },
      "molokheiya": { "name": "ãƒ¢ãƒ­ãƒ˜ã‚¤ãƒ¤", "tasks": ["å®šæ¤", "æ‘˜å¿ƒ", "åç©«"], "intervals": [0, 30, 30], "varieties": ["åœ¨æ¥"], "hint": "ç››å¤ã®è²´é‡ãªé’ç‰©ã€‚ãƒãƒ€ãƒ‹æ³¨æ„" },
      "tasai": { "name": "ã‚¿ã‚¢ã‚µã‚¤", "tasks": ["æ’­ç¨®", "åç©«"], "intervals": [0, 60], "varieties": ["å†¬ç·‘"], "hint": "å¯’å†·åœ°ã§ç”˜ã¿ãŒå¢—ã™" }
    },
    "æ ¹èœãƒ»èŠ‹é¡": {
      "daikon": { "name": "ãƒ€ã‚¤ã‚³ãƒ³", "tasks": ["æ’­ç¨®", "é–“å¼•ã", "åç©«"], "intervals": [0, 15, 75], "varieties": ["é’é¦–å¤§æ ¹"], "hint": "ã‚¢ãƒ–ãƒ©ãƒ ã‚·æ³¨æ„ã€‚å…ƒè‚¥é‡è¦–" },
      "ninjin": { "name": "ãƒ‹ãƒ³ã‚¸ãƒ³", "tasks": ["æ’­ç¨®", "é–“å¼•ã", "åç©«"], "intervals": [0, 25, 95], "varieties": ["å‘é™½äºŒå¯¸"], "hint": "ã‚­ã‚¢ã‚²ãƒæ³¨æ„ã€‚åˆæœŸã®ä¹¾ç‡¥å³ç¦" },
      "kabu": { "name": "ã‚«ãƒ–", "tasks": ["æ’­ç¨®", "é–“å¼•ã", "åç©«"], "intervals": [0, 15, 35], "varieties": ["è–è­·é™¢"], "hint": "ã‚³ãƒŠã‚¬æ³¨æ„ã€‚çŸ­æœŸåç©«ã§ã‚¹ãŒå…¥ã‚‹ã®ã‚’é˜²ã" },
      "tamanegi": { "name": "ã‚¿ãƒãƒã‚®", "tasks": ["å®šæ¤", "æ˜¥è¿½è‚¥", "åç©«"], "intervals": [0, 90, 110], "varieties": ["ã‚‚ã¿ã˜"], "hint": "æ­¢ã‚è‚¥ã®æ™‚æœŸæ³¨æ„ï¼ˆä¿å­˜æ€§ã«å½±éŸ¿ï¼‰" },
      "ninniku": { "name": "ãƒ‹ãƒ³ãƒ‹ã‚¯", "tasks": ["æ¤ä»˜ã‘", "æ˜¥è¿½è‚¥", "èŠ½æ‘˜ã¿", "åç©«"], "intervals": [0, 120, 90, 30], "varieties": ["ãƒ›ãƒ¯ã‚¤ãƒˆå…­ç‰‡"], "hint": "ã•ã³ç—…æ³¨æ„ã€‚èŠ½ã‚’æ‘˜ã‚€ã¨çƒãŒå¤ªã‚‹" },
      "jagaimo": { "name": "ã‚¸ãƒ£ã‚¬ã‚¤ãƒ¢", "tasks": ["æ¤ä»˜ã‘", "èŠ½ã‹ã", "åœŸå¯„ã›", "åç©«"], "intervals": [0, 35, 30, 45], "varieties": ["ç”·çˆµ"], "hint": "ç–«ç—…æ³¨æ„ã€‚ã‚«ãƒªåˆ†ã‚’å¤šã‚ã«æ–½è‚¥" },
      "satsumaimo": { "name": "ã‚µãƒ„ãƒã‚¤ãƒ¢", "tasks": ["è‹—æ¤ä»˜ã‘", "ã¤ã‚‹è¿”ã—", "åç©«"], "intervals": [0, 60, 90], "varieties": ["ç´…ã¯ã‚‹ã‹"], "hint": "çª’ç´ ã¯æ§ãˆã‚ï¼ˆã¤ã‚‹ãƒœã‚±é˜²æ­¢ï¼‰" },
      "satoimo": { "name": "ã‚µãƒˆã‚¤ãƒ¢", "tasks": ["ç¨®èŠ‹æ¤ä»˜", "åœŸå¯„ã›", "åç©«"], "intervals": [0, 60, 120], "varieties": ["çŸ³å·æ—©ç”Ÿ"], "hint": "ä¹¾ç‡¥é˜²æ­¢ã®ãŸã‚ãƒãƒ«ãƒã‚„æ•·ãè—ã‚’æ¨å¥¨" },
      "nagaimo": { "name": "å±±èŠ‹/é•·èŠ‹", "tasks": ["æ¤ä»˜ã‘", "æ”¯æŸ±ç«‹ã¦", "åç©«"], "intervals": [0, 30, 170], "varieties": ["ãƒŠã‚¬ã‚¤ãƒ¢"], "hint": "ç‚­ãç—…æ³¨æ„ã€‚å †è‚¥ã‚’ãŸã£ã·ã‚ŠæŠ•å…¥" },
      "gobo": { "name": "ã‚´ãƒœã‚¦", "tasks": ["æ’­ç¨®", "åç©«"], "intervals": [0, 150], "varieties": ["æ»é‡å·"], "hint": "ã‚¢ãƒ–ãƒ©ãƒ ã‚·æ³¨æ„ã€‚æ·±è€•ã—ã¦çŸ³ã‚’é™¤ã" },
      "renkon": { "name": "ãƒ¬ãƒ³ã‚³ãƒ³", "tasks": ["æ¤ä»˜ã‘", "æ°´ä½ç®¡ç†", "åç©«"], "intervals": [0, 90, 110], "varieties": ["é‡‘æ¾„"], "hint": "ã‚¤ãƒãƒã‚¯ã‚¤ãƒ ã‚·æ³¨æ„ã€‚æµ®ãè‰ã®ç®¡ç†" },
      "rakkyo": { "name": "ã‚‰ã£ãã‚‡ã†", "tasks": ["æ¤ä»˜ã‘", "åœŸå¯„ã›", "åç©«"], "intervals": [0, 180, 120], "varieties": ["ãƒ©ã‚¯ãƒ€"], "hint": "ç™½è‰²ç–«ç—…æ³¨æ„ã€‚å…ƒè‚¥ã®ã¿ã§æ ½åŸ¹å¯èƒ½" },
      "shoga": { "name": "ã‚·ãƒ§ã‚¦ã‚¬", "tasks": ["æ¤ä»˜ã‘", "åœŸå¯„ã›", "åç©«"], "intervals": [0, 60, 120], "varieties": ["è¿‘æ±Ÿ"], "hint": "æ ¹èŒè…æ•—ç—…æ³¨æ„ã€‚æ°´ã¨åŠæ—¥é™°ã‚’å¥½ã‚€" },
      "wasabi": { "name": "ãƒ¯ã‚µãƒ“", "tasks": ["å®šæ¤", "ç®¡ç†", "åç©«"], "intervals": [0, 250, 250], "varieties": ["çœŸå¦»"], "hint": "æ°´è³ªç®¡ç†ãŒé‡è¦ã€‚å¤å ´ã®æ°´æ¸©ä¸Šæ˜‡æ³¨æ„" },
      "konnyaku": { "name": "ã‚³ãƒ³ãƒ‹ãƒ£ã‚¯", "tasks": ["æ¤ä»˜ã‘", "é™¤è‰", "åç©«"], "intervals": [0, 60, 120], "varieties": ["ã‚ã‹ããŠãŠã ã¾"], "hint": "æ ¹è…ç—…æ³¨æ„ã€‚ã‚«ãƒªåˆ†é‡è¦–ã®æ–½è‚¥" }
    },
    "æœæ¨¹": {
      "mikan": { "name": "æ¸©å·ãƒŸã‚«ãƒ³", "tasks": ["å‰ªå®š", "æ‘˜æœ", "åç©«"], "intervals": [0, 120, 120], "varieties": ["æ—©ç”Ÿ"], "hint": "ã‚«ã‚¤ã‚¬ãƒ©ãƒ ã‚·æ³¨æ„ã€‚3å›ã«åˆ†ã‘ã¦æ–½è‚¥" },
      "ringo": { "name": "ãƒªãƒ³ã‚´", "tasks": ["å‰ªå®š", "æ‘˜æœ", "è¢‹æ›ã‘", "åç©«"], "intervals": [0, 100, 40, 60], "varieties": ["ãµã˜"], "hint": "é»’æ˜Ÿç—…æ³¨æ„ã€‚åç©«å¾Œã«ãŠç¤¼è‚¥" },
      "budo": { "name": "ãƒ–ãƒ‰ã‚¦", "tasks": ["å‰ªå®š", "ã‚¸ãƒ™å‡¦ç†", "åç©«"], "intervals": [0, 100, 80], "varieties": ["ã‚·ãƒ£ã‚¤ãƒ³ãƒã‚¹ã‚«ãƒƒãƒˆ"], "hint": "æ™©è…ç—…æ³¨æ„ã€‚æœ‰æ©Ÿé…åˆè‚¥æ–™ã‚’æ¨å¥¨" },
      "nashi": { "name": "æ¢¨", "tasks": ["å‰ªå®š", "äººå·¥æˆç²‰", "åç©«"], "intervals": [0, 60, 120], "varieties": ["å¹¸æ°´"], "hint": "èµ¤æ˜Ÿç—…æ³¨æ„ã€‚åŸºè‚¥ã‚’é‡è¦–" },
      "momo": { "name": "æ¡ƒ", "tasks": ["å‰ªå®š", "æ‘˜æœ", "è¢‹æ›ã‘", "åç©«"], "intervals": [0, 60, 30, 30], "varieties": ["ã‚ã‹ã¤ã"], "hint": "ã›ã‚“å­”ç´°èŒç—…æ³¨æ„ã€‚åç©«é©æœŸãŒçŸ­ã„" },
      "kaki": { "name": "æŸ¿", "tasks": ["å‰ªå®š", "ãƒ˜ã‚¿è™«é˜²é™¤", "åç©«"], "intervals": [0, 120, 90], "varieties": ["å¯Œæœ‰"], "hint": "ãƒ˜ã‚¿ãƒ ã‚·æ³¨æ„ã€‚éš”å¹´çµæœã®èª¿æ•´" },
      "ume": { "name": "æ¢…", "tasks": ["å‰ªå®š", "åç©«"], "intervals": [0, 120], "varieties": ["å—é«˜æ¢…"], "hint": "é»’æ˜Ÿç—…æ³¨æ„ã€‚ç§‹ã®æ–½è‚¥ã‚’æ¬ ã‹ã•ãªã„" },
      "cherry": { "name": "ã•ãã‚‰ã‚“ã¼", "tasks": ["æˆç²‰", "åç©«"], "intervals": [0, 60], "varieties": ["ä½è—¤éŒ¦"], "hint": "ç°æ˜Ÿç—…æ³¨æ„ã€‚å…ƒè‚¥ä¸»ä½“ã§è‚²ã¦ã‚‹" },
      "kiwi": { "name": "ã‚­ã‚¦ã‚¤", "tasks": ["å‰ªå®š", "æˆç²‰", "åç©«"], "intervals": [0, 100, 110], "varieties": ["ãƒ˜ã‚¤ãƒ¯ãƒ¼ãƒ‰"], "hint": "ã‹ã„ã‚ˆã†ç—…æ³¨æ„ã€‚å¤å ´ã®æ°´ç®¡ç†" },
      "fig": { "name": "ã‚¤ãƒã‚¸ã‚¯", "tasks": ["å‰ªå®š", "èª˜å¼•", "åç©«é–‹å§‹"], "intervals": [0, 60, 90], "varieties": ["ãƒ‰ãƒ¼ãƒ•ã‚£ãƒ³"], "hint": "ã‚«ãƒŸã‚­ãƒªãƒ ã‚·æ³¨æ„ã€‚çŸ³ç°å¤šã‚ã‚’å¥½ã‚€" },
      "biwa": { "name": "ã³ã‚", "tasks": ["æ‘˜è•¾", "è¢‹æ›ã‘", "åç©«"], "intervals": [0, 60, 150], "varieties": ["èŒ‚æœ¨"], "hint": "ãŒã‚“ã—ã‚…ç—…æ³¨æ„ã€‚å¯’å®³å¯¾ç­–ãŒé‡è¦" },
      "lemon": { "name": "ãƒ¬ãƒ¢ãƒ³", "tasks": ["å‰ªå®š", "åç©«"], "intervals": [0, 240], "varieties": ["ãƒªã‚¹ãƒœãƒ³"], "hint": "ã‚¢ã‚²ãƒã®å¹¼è™«æ³¨æ„ã€‚å¤šè‚¥æ ½åŸ¹ã‚’å¥½ã‚€" },
      "yuzu": { "name": "ãƒ¦ã‚º", "tasks": ["å‰ªå®š", "åç©«"], "intervals": [0, 240], "varieties": ["æœ¨é ­"], "hint": "ã‚«ã‚¤ã‚¬ãƒ©ãƒ ã‚·æ³¨æ„ã€‚å†¬ã®æ–½è‚¥ã‚’é‡è¦–" },
      "sudachi": { "name": "ã‚¹ãƒ€ãƒ", "tasks": ["åç©«"], "intervals": [0, 180], "varieties": ["å¾³å³¶"], "hint": "ã‚µãƒ“ãƒ€ãƒ‹æ³¨æ„ã€‚æœ‰æ©Ÿè‚¥æ–™ã‚’æ¨å¥¨" },
      "kurumi": { "name": "ãã‚‹ã¿", "tasks": ["å‰ªå®š", "åç©«"], "intervals": [0, 200], "varieties": ["ä¿¡æ¿ƒ"], "hint": "é»’æ–‘ç—…æ³¨æ„ã€‚åŸºè‚¥ã‚’ã—ã£ã‹ã‚Š" },
      "kuri": { "name": "æ —", "tasks": ["æ‹¾ã„åç©«"], "intervals": [0, 150], "varieties": ["ç­‘æ³¢"], "hint": "ã‚·ã‚®ã‚¾ã‚¦ãƒ ã‚·æ³¨æ„ã€‚å‰ªå®šå¾Œã®æ–½è‚¥" },
      "sumomo": { "name": "ã™ã‚‚ã‚‚", "tasks": ["æ‘˜æœ", "åç©«"], "intervals": [0, 40, 60], "varieties": ["å¤§çŸ³æ—©ç”Ÿ"], "hint": "ãµãã‚å®Ÿç—…æ³¨æ„ã€‚å…ƒè‚¥ã‚’é‡è¦–" },
      "anzu": { "name": "ã‚ã‚“ãš", "tasks": ["åç©«"], "intervals": [0, 100], "varieties": ["ãƒãƒ¼ã‚³ãƒƒãƒˆ"], "hint": "ç°æ˜Ÿç—…æ³¨æ„ã€‚æ—¥å½“ãŸã‚Šã‚’ç¢ºä¿" },
      "olive": { "name": "ã‚ªãƒªãƒ¼ãƒ–", "tasks": ["å‰ªå®š", "åç©«"], "intervals": [0, 200], "varieties": ["ãƒŸãƒƒã‚·ãƒ§ãƒ³"], "hint": "ã‚¾ã‚¦ãƒ ã‚·æ³¨æ„ã€‚ã‚¢ãƒ«ã‚«ãƒªæ€§åœŸå£Œã‚’ç¶­æŒ" },
      "mango": { "name": "ãƒãƒ³ã‚´ãƒ¼", "tasks": ["å‰ªå®š", "åŠã‚Šä¸Šã’", "åç©«"], "intervals": [0, 60, 90], "varieties": ["ã‚¢ãƒ¼ã‚¦ã‚£ãƒ³"], "hint": "ç‚­ãç—…æ³¨æ„ã€‚ãƒã‚¦ã‚¹ã®æ¸©åº¦ç®¡ç†" },
      "passion": { "name": "ãƒ‘ãƒƒã‚·ãƒ§ãƒ³F", "tasks": ["æˆç²‰", "åç©«"], "intervals": [0, 120], "varieties": ["åœ¨æ¥"], "hint": "æ°´ç®¡ç†ã¨æ£šä»•ç«‹ã¦ãŒé‡è¦" }
    },
    "ãƒãƒ¼ãƒ–ãƒ»ç‰¹ç”£ãƒ»ãã®ã“": {
      "shiitake": { "name": "ã—ã„ãŸã‘(åŸæœ¨)", "tasks": ["æ¥èŒ", "ä¼ã›è¾¼ã¿", "ç™ºç”Ÿ"], "intervals": [0, 180, 320], "varieties": ["ã«ãä¸¸"], "hint": "å®³èŒæ³¨æ„ã€‚æ•£æ°´ç®¡ç†ã§ç™ºç”Ÿã‚’ä¿ƒã™" },
      "maitake": { "name": "ã¾ã„ãŸã‘", "tasks": ["ç™ºç”Ÿç®¡ç†", "åç©«"], "intervals": [0, 90], "varieties": ["é»’èˆ"], "hint": "æ¹¿åº¦ç®¡ç†ãŒæ¥µã‚ã¦é‡è¦" },
      "enoki": { "name": "ãˆã®ã", "tasks": ["æ¸©åº¦ç®¡ç†", "åç©«"], "intervals": [0, 60], "varieties": ["ç™½ãˆã®ã"], "hint": "ç©ºèª¿ç®¡ç†ã«ã‚ˆã‚‹å‘¨å¹´æ ½åŸ¹ãŒä¸»" },
      "basil": { "name": "ãƒã‚¸ãƒ«", "tasks": ["æ‘˜å¿ƒ", "åç©«"], "intervals": [0, 30, 30], "varieties": ["ã‚¹ã‚¤ãƒ¼ãƒˆ"], "hint": "æ¶²è‚¥è¿½è‚¥ã§è‘‰ã‚’æŸ”ã‚‰ã‹ãä¿ã¤" },
      "rosemary": { "name": "ãƒ­ãƒ¼ã‚ºãƒãƒªãƒ¼", "tasks": ["å‰ªå®š", "åç©«"], "intervals": [0, 365], "varieties": ["ç«‹æ€§"], "hint": "è‚¥æ–™æ§ãˆã‚ã€‚å¤šæ¹¿ã‚’å«Œã†" },
      "mint": { "name": "ãƒŸãƒ³ãƒˆ", "tasks": ["åç©«"], "intervals": [0, 60], "varieties": ["ãƒšãƒ‘ãƒ¼ãƒŸãƒ³ãƒˆ"], "hint": "ã‚µãƒ“ç—…æ³¨æ„ã€‚æ”¾ä»»å¯èƒ½ã ãŒåœ°ä¸‹èŒã«æ³¨æ„" },
      "coriander": { "name": "ãƒ‘ã‚¯ãƒãƒ¼", "tasks": ["æ’­ç¨®", "åç©«"], "intervals": [0, 60], "varieties": ["ã‚µãƒ¯ãƒ‡ã‚£"], "hint": "å…ƒè‚¥ã®ã¿ã€‚ç§»æ¤ã‚’å«Œã†ï¼ˆç›´ã¾ãæ¨å¥¨ï¼‰" },
      "lavender": { "name": "ãƒ©ãƒ™ãƒ³ãƒ€ãƒ¼", "tasks": ["åˆˆè¾¼ã¿", "åç©«"], "intervals": [0, 300, 65], "varieties": ["ã‚°ãƒ­ãƒƒã‚½"], "hint": "ä¹¾ç‡¥æ°—å‘³ã«ç®¡ç†ã€‚è’¸ã‚Œã«æ³¨æ„" },
      "wasabi_leaf": { "name": "è‘‰ã‚ã•ã³", "tasks": ["åç©«"], "intervals": [0, 120], "varieties": ["å®Ÿç”Ÿ"], "hint": "æµæ°´ã¾ãŸã¯å†·æ¶¼ãªæ¹¿åœ°ã§ç®¡ç†" },
      "sansho": { "name": "å®Ÿå±±æ¤’", "tasks": ["å‰ªå®š", "åç©«"], "intervals": [0, 180], "varieties": ["æœå€‰"], "hint": "ã‚¢ã‚²ãƒã®å¹¼è™«ã«æ³¨æ„ã€‚å…ƒè‚¥é‡è¦–" },
      "myoga": { "name": "ãƒŸãƒ§ã‚¦ã‚¬", "tasks": ["åç©«"], "intervals": [0, 120], "varieties": ["åœ¨æ¥"], "hint": "æ—¥é™°ã®å †è‚¥ã¨æ¹¿æ°—ã‚’å¥½ã‚€" },
      "udo": { "name": "ã‚¦ãƒ‰", "tasks": ["è»ŸåŒ–", "åç©«"], "intervals": [0, 90, 60], "varieties": ["å±±ã†ã©"], "hint": "é®å…‰ç®¡ç†ã§è»Ÿç™½ã•ã›ã‚‹" },
      "tara": { "name": "ã‚¿ãƒ©ãƒã‚­", "tasks": ["ãµã‹ã—", "åç©«"], "intervals": [0, 40, 20], "varieties": ["æ–°ãƒˆã‚²ãªã—"], "hint": "èŠ½ã‚’æ‘˜ã¿ã™ãã‚‹ã¨æœ¨ãŒæ¯ã‚Œã‚‹" },
      "fuki": { "name": "ãƒ•ã‚­", "tasks": ["åç©«"], "intervals": [0, 180], "varieties": ["æ„›çŸ¥æ—©ç”Ÿ"], "hint": "ãƒ•ã‚­ãƒãƒ¡ã‚¤ã‚¬æ³¨æ„ã€‚å †è‚¥ã‚’å¥½ã‚€" },
      "blueberry": { "name": "ãƒ–ãƒ«ãƒ¼ãƒ™ãƒªãƒ¼", "tasks": ["å‰ªå®š", "åç©«"], "intervals": [0, 150], "varieties": ["ãƒã‚¤ãƒ–ãƒƒã‚·ãƒ¥"], "hint": "ã‚¤ãƒ©ã‚¬æ³¨æ„ã€‚é…¸æ€§åœŸå£Œï¼ˆãƒ”ãƒ¼ãƒˆãƒ¢ã‚¹ç­‰ï¼‰ãŒå¿…é ˆ" }
    }
  }
};


// å¤©æ°—ã‚³ãƒ¼ãƒ‰ã‚’æ—¥æœ¬èªã«å¤‰æ›ã™ã‚‹è¾æ›¸
const weatherMap = {
    0: "æ™´", 1: "æ™´", 2: "æ›‡", 3: "æ›‡",
    45: "éœ§", 48: "éœ§", 51: "éœ§é›¨", 61: "é›¨",
    71: "é›ª", 80: "é›¨", 95: "é›·é›¨"
};
let currentCondition = "ä¸æ˜"; // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã§å¤©æ°—ã‚’ä¿æŒ

        let db = JSON.parse(localStorage.getItem('agri_db_v4') || '[]');
        let regMode = 'start';
        let config = JSON.parse(localStorage.getItem('agri_config') || '{"lat":34.16,"lon":135.18}');
        let currentTemp = "--";

        async function init() {
            document.getElementById('baseDateInput').value = new Date().toISOString().split('T')[0];
            setupCropSelect();
            getWeather();
            render();
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => {
                    config.lat = pos.coords.latitude; config.lon = pos.coords.longitude;
                    document.getElementById('addrDisplay').innerText = `${config.lat.toFixed(2)},${config.lon.toFixed(2)}`;
                    localStorage.setItem('agri_config', JSON.stringify(config));
                });
            }
        }

// 2. åˆæœŸåŒ–ã¨ã‚½ãƒ¼ãƒˆ
function setupCropSelect() {
    const sel = document.getElementById('cropSelect');
    sel.innerHTML = '<option value="">-- ä½œç›®ã‚’é¸æŠ --</option>';
    
    // ã‚«ãƒ†ã‚´ãƒªã‚’äº”åéŸ³é †ã«ã‚½ãƒ¼ãƒˆ
    const sortedCats = Object.keys(MASTER.crops).sort((a, b) => a.localeCompare(b, 'ja'));

    sortedCats.forEach(cat => {
        const group = document.createElement('optgroup');
        group.label = cat;
        
        // ä½œç›®åã‚’äº”åéŸ³é †ã«ã‚½ãƒ¼ãƒˆ
        const cropsInCat = Object.keys(MASTER.crops[cat]).sort((a, b) => {
            return MASTER.crops[cat][a].name.localeCompare(MASTER.crops[cat][b].name, 'ja');
        });

        cropsInCat.forEach(key => {
            const opt = document.createElement('option');
            opt.value = `${cat}|${key}`;
            opt.innerText = MASTER.crops[cat][key].name;
            group.appendChild(opt);
        });
        sel.appendChild(group);
    });
}
        async function getWeather() {
    try {
        const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${config.lat}&longitude=${config.lon}&current_weather=true`);
        const data = await res.json();
        currentTemp = Math.round(data.current_weather.temperature);
        const code = data.current_weather.weathercode;
        currentCondition = weatherMap[code] || "ä¸æ˜"; // æ—¥æœ¬èªã«å¤‰æ›
        // ç”»é¢ã®æ°—æ¸©è¡¨ç¤ºã‚‚æ›´æ–°ï¼ˆã‚‚ã—ã‚ã‚Œã°ï¼‰
        if(document.getElementById('weatherTemp')) {
            document.getElementById('weatherTemp').innerText = `${currentCondition} ${currentTemp}â„ƒ`;
        }
    } catch(e) { console.error("Weather failed", e); }
}

        function render() {
            const list = document.getElementById('mainList');
            list.innerHTML = db.length ? "" : '<div class="text-center py-20 text-slate-300 font-bold italic text-sm">æ ½åŸ¹ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>';
            db.forEach(item => {
                const card = document.createElement('div');
                card.className = "task-card border-l-4 border-l-emerald-500";
                card.innerHTML = `
                    <div class="p-3 bg-slate-50 flex justify-between items-center border-b">
                        <div>
                            <span class="font-black text-sm text-slate-800">${item.name}</span>
                            <span class="text-[9px] font-bold text-emerald-600 ml-2">${item.field} / ${item.variety}</span>
                        </div>
                        <button onclick="deleteCard(${item.id})" class="text-slate-300"><i class="bi bi-trash text-sm"></i></button>
                    </div>
                    <div class="p-2 space-y-1">
                        ${item.tasks.map((t, idx) => `
                            <div class="relative">
                                <div class="flex items-center gap-2 p-2 rounded-lg ${t.isDone?'bg-emerald-50':'bg-white'}">
                                    <button onclick="toggleTask(${item.id}, ${idx})" class="text-xl shrink-0">
                                        <i class="bi ${t.isDone?'bi-check-circle-fill text-emerald-500':'bi-circle text-slate-200'}"></i>
                                    </button>
                                    <div class="flex-1 flex items-center justify-between min-w-0">
                                        <div class="flex-1 min-w-0">
                                            <div class="flex items-center">
                                                <span contenteditable="true" onblur="updateTaskName(${item.id},${idx},this.innerText)" class="editable-name text-xs font-bold truncate ${t.isDone?'text-emerald-900':'text-slate-700'}">${t.name}</span>
                                                ${t.weatherLog ? `<span class="weather-stamp ml-2">${t.weatherLog}</span>` : ''}
                                            </div>
                                            ${t.memo ? `<p class="text-[10px] text-slate-400 mt-1 italic">ğŸ“ ${t.memo}</p>` : ''}
                                        </div>
                                        <input type="date" value="${t.date}" onchange="updateDate(${item.id},${idx},this.value)" class="text-[10px] font-bold border-none bg-transparent text-slate-400 w-24">
                                    </div>
                                    <button onclick="toggleMenu('menu-${item.id}-${idx}')" class="text-slate-300 px-1"><i class="bi bi-three-dots-vertical"></i></button>
                                </div>
                                <div id="menu-${item.id}-${idx}" class="action-menu hidden">
                                    <button onclick="addMemoPrompt(${item.id},${idx})"><i class="bi bi-pencil-square mr-2"></i>ãƒ¡ãƒ¢ã‚’è¿½åŠ </button>
                                    <button onclick="addTask(${item.id},${idx})"><i class="bi bi-arrow-up-circle mr-2"></i>å‰ã«å·¥ç¨‹æŒ¿å…¥</button>
                                    <button onclick="addTask(${item.id},${idx+1})"><i class="bi bi-arrow-down-circle mr-2"></i>å¾Œã«å·¥ç¨‹æŒ¿å…¥</button>
                                    <button onclick="deleteTask(${item.id},${idx})"><i class="bi bi-trash mr-2"></i>ã“ã®å·¥ç¨‹ã‚’å‰Šé™¤</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="p-2 bg-slate-50 border-t">
                        <button onclick="copyToNextSeason(${item.id})" class="w-full py-2 bg-white border border-emerald-100 text-emerald-600 rounded-lg text-[10px] font-black"><i class="bi bi-arrow-repeat mr-1"></i>å…¨å·¥ç¨‹ã‚’æ¬¡æœŸã¸ã‚³ãƒ”ãƒ¼</button>
                    </div>
                `;
                list.appendChild(card);
            });
        }

        function toggleMenu(menuId) {
            const menu = document.getElementById(menuId);
            const isHidden = menu.classList.contains('hidden');
            document.querySelectorAll('.action-menu').forEach(m => m.classList.add('hidden'));
            if (isHidden) menu.classList.remove('hidden');
        }

        function toggleTask(id, idx) {
    const item = db.find(x => x.id === id);
    const task = item.tasks[idx];
    task.isDone = !task.isDone;
    if (task.isDone) {
        const now = new Date();
        const dStr = `${now.getMonth()+1}/${now.getDate()}`;
        const tStr = `${now.getHours()}:${now.getMinutes().toString().padStart(2,'0')}`;
        // æ™‚åˆ» + å¤©æ°— + æ°—æ¸© ã‚’ä¿å­˜
        task.weatherLog = `${dStr} ${tStr} (${currentCondition} ${currentTemp}â„ƒ)`;
    } else {
        task.weatherLog = null;
    }
    save(); render();
}

        function addMemoPrompt(id, idx) {
            const item = db.find(x => x.id === id);
            const msg = prompt("ãƒ¡ãƒ¢ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", item.tasks[idx].memo || "");
            if (msg !== null) {
                item.tasks[idx].memo = msg;
                save(); render();
            }
        }

        // 3. é€†ç®—ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œã®ä¿å­˜ãƒ­ã‚¸ãƒƒã‚¯
function saveNewCrop() {
    const val = document.getElementById('cropSelect').value; 
    if(!val) return;
    
    const [cat, key] = val.split('|'); 
    const m = MASTER.crops[cat][key];
    const baseDate = new Date(document.getElementById('baseDateInput').value);
    
    let taskData = [];
    if (regMode === 'start') {
        // é–‹å§‹æ—¥ã‹ã‚‰ã®ç©ã¿ä¸Šã’
        taskData = m.tasks.map((t, i) => {
            let d = new Date(baseDate);
            const offset = m.intervals.slice(0, i + 1).reduce((a, b) => a + b, 0);
            d.setDate(d.getDate() + offset);
            return { name: t, date: d.toISOString().split('T')[0], isDone: false, weatherLog: null, memo: "" };
        });
    } else {
        // åç©«æ—¥ï¼ˆæœ€å¾Œã®å·¥ç¨‹ï¼‰ã‹ã‚‰ã®é€†ç®—
        const totalDays = m.intervals.reduce((a, b) => a + b, 0);
        taskData = m.tasks.map((t, i) => {
            let d = new Date(baseDate);
            const offsetFromEnd = m.intervals.slice(i + 1).reduce((a, b) => a + b, 0);
            d.setDate(d.getDate() - offsetFromEnd);
            return { name: t, date: d.toISOString().split('T')[0], isDone: false, weatherLog: null, memo: "" };
        });
    }

    db.unshift({ 
        id: Date.now(), 
        name: m.name, 
        variety: document.getElementById('varietyInput').value || (m.varieties ? m.varieties[0] : "æ¨™æº–"), 
        field: document.getElementById('fieldInput').value || "æœªè¨­å®š", 
        tasks: taskData 
    });
    
    save(); 
    render(); 
    closeRegModal();
}

        function addTask(id, pos) {
            const item = db.find(x => x.id === id);
            const newDate = pos > 0 ? item.tasks[pos-1].date : new Date().toISOString().split('T')[0];
            item.tasks.splice(pos, 0, { name: "æ–°ã—ã„å·¥ç¨‹", date: newDate, isDone: false, weatherLog: null, memo: "" });
            save(); render();
        }

        function deleteTask(id, idx) {
            if(confirm("å·¥ç¨‹ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) {
                db.find(x => x.id === id).tasks.splice(idx, 1);
                save(); render();
            }
        }

        function copyToNextSeason(id) {
            if(!confirm("å…¨å·¥ç¨‹ã‚’1å¹´å¾Œã«ã‚¹ãƒ©ã‚¤ãƒ‰ã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã‹ï¼Ÿ")) return;
            const original = db.find(x => x.id === id);
            const newItem = JSON.parse(JSON.stringify(original));
            newItem.id = Date.now();
            newItem.tasks.forEach(t => {
                let d = new Date(t.date); d.setFullYear(d.getFullYear() + 1);
                t.date = d.toISOString().split('T')[0]; t.isDone = false; t.weatherLog = null;
            });
            db.unshift(newItem); save(); render();
            window.scrollTo({top:0, behavior:'smooth'});
        }

        function save() { localStorage.setItem('agri_db_v4', JSON.stringify(db)); }
        function updateTaskName(id, idx, val) { db.find(x => x.id === id).tasks[idx].name = val; save(); }
        function updateDate(id, idx, val) { db.find(x => x.id === id).tasks[idx].date = val; save(); }
        function deleteCard(id) { if(confirm("æ ½åŸ¹è¨ˆç”»å…¨ä½“ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) { db = db.filter(x => x.id !== id); save(); render(); } }
        function openRegModal() { document.getElementById('regModal').classList.remove('hidden'); }
        function closeRegModal() { document.getElementById('regModal').classList.add('hidden'); }
        function openHelp() { document.getElementById('helpModal').classList.remove('hidden'); }
        function closeHelp() { document.getElementById('helpModal').classList.add('hidden'); }
        // ç™»éŒ²ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿æ™‚ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ä¿®æ­£
function setRegMode(m) {
    regMode = m;
    const sBtn = document.getElementById('modeStart');
    const eBtn = document.getElementById('modeEnd');
    if (m === 'start') {
        sBtn.className = "flex-1 py-2 rounded-lg text-[10px] font-black bg-emerald-600 text-white";
        eBtn.className = "flex-1 py-2 rounded-lg text-[10px] font-black bg-slate-200 text-slate-500";
    } else {
        eBtn.className = "flex-1 py-2 rounded-lg text-[10px] font-black bg-emerald-600 text-white";
        sBtn.className = "flex-1 py-2 rounded-lg text-[10px] font-black bg-slate-200 text-slate-500";
    }
}
        
        async function exportAndShare() {
            const blob = new Blob([JSON.stringify(db, null, 2)], { type: 'application/json' });
            const file = new File([blob], `agri_backup.json`, { type: 'application/json' });
            if (navigator.share) await navigator.share({ files: [file] });
        }
        function importData(e) {
            const r = new FileReader(); r.onload = (f) => {
                db = JSON.parse(f.target.result); save(); location.reload();
            };
            r.readAsText(e.target.files[0]);
        }

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.relative')) document.querySelectorAll('.action-menu').forEach(m => m.classList.add('hidden'));
        });

        window.onload = init;
    </script>
</body>
</html>
