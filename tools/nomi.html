<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç«¯æ•°ãªã—ç²¾ç®—æ©Ÿ | PocketPortal Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        body { font-family: 'Inter', 'Noto Sans JP', sans-serif; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen flex flex-col">

   <nav class="bg-white border-b border-slate-200 py-4 px-6 sticky top-0 z-50">
    <div class="container mx-auto flex justify-between items-center">
        <a href="../index.html" class="flex items-center gap-2 font-bold text-lg text-blue-700">
            <span>ğŸ </span> PocketPortal
        </a>
        <a href="./index.html" class="text-[10px] text-slate-400 hover:text-blue-500 transition-colors">Webä¾¿åˆ©ãƒ„ãƒ¼ãƒ«é›†ã¸</a>
    </div>
   </nav>

    <header class="bg-white border-b border-slate-100 py-6 px-6">
        <div class="container mx-auto text-center">
            <h1 class="text-xl font-bold text-slate-800 mb-1">ç«¯æ•°ãªã—ç²¾ç®—æ©Ÿ</h1>
            <p class="text-[10px] text-slate-500 uppercase tracking-tighter">å€‹åˆ¥èª¿æ•´ã¨LINEã‚³ãƒ”ãƒšæ©Ÿèƒ½ã‚’æ­è¼‰</p>
        </div>
    </header>

    <main class="flex-grow container mx-auto py-6 px-4 max-w-xl">
        
        <div class="bg-white rounded-3xl shadow-xl border border-slate-100 p-6 mb-6">
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2 ml-1">æ”¯æ‰•ç·é¡ (å††)</label>
                    <input type="number" id="total-amount" oninput="calculate()" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl text-lg font-bold focus:ring-2 focus:ring-blue-500 outline-none" placeholder="30000">
                </div>
                <div>
                    <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2 ml-1">ç«¯æ•°å˜ä½ (å††)</label>
                    <select id="round-unit" onchange="calculate()" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl text-lg focus:ring-2 focus:ring-blue-500 outline-none">
                        <option value="1">1å††å˜ä½</option>
                        <option value="10">10å††å˜ä½</option>
                        <option value="100" selected>100å††å˜ä½</option>
                        <option value="500">500å††å˜ä½</option>
                    </select>
                </div>
            </div>
        </div>

        <div id="member-list" class="space-y-3 mb-6">
            </div>

        <button onclick="addMember()" class="w-full py-4 mb-6 border-2 border-dashed border-slate-200 text-slate-400 rounded-2xl text-xs font-bold hover:bg-slate-100 transition-all">
            ï¼‹ ãƒ¡ãƒ³ãƒãƒ¼ã‚’è¿½åŠ 
        </button>

        <div class="bg-slate-900 text-white rounded-3xl p-6 shadow-xl mb-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-[10px] font-bold text-blue-400 uppercase tracking-widest">ç²¾ç®—çµæœ</h3>
                <span id="diff-amount" class="text-[10px] font-bold text-orange-400">å·®é¡: 0å††</span>
            </div>
            
            <div id="result-text-area" class="bg-slate-800 rounded-2xl p-4 text-xs font-mono leading-relaxed whitespace-pre-wrap mb-4 min-h-[100px]">
                ãƒ¡ãƒ³ãƒãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>

            <button onclick="copyToClipboard()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-bold text-xs transition-all flex items-center justify-center gap-2">
                <span>ğŸ“‹</span> LINEç”¨ã«çµæœã‚’ã‚³ãƒ”ãƒ¼
            </button>
        </div>
    </main>

    <footer class="py-8 text-center text-slate-400 text-[10px]">
        <p>Â© 2026 PocketPortal Tools</p>
    </footer>

    <script>
        let memberCount = 0;

        function addMember(name = '', adjust = 0) {
            const id = `member-${Date.now()}`;
            const html = `
                <div id="${id}" class="bg-white p-4 rounded-2xl border border-slate-100 flex items-center gap-3 animate-in fade-in slide-in-from-bottom-2 duration-300">
                    <input type="text" value="${name}" oninput="calculate()" class="flex-1 bg-slate-50 border border-slate-100 p-3 rounded-xl text-sm outline-none focus:ring-1 focus:ring-blue-500" placeholder="åå‰">
                    <div class="relative w-28">
                        <span class="absolute left-2 top-1/2 -translate-y-1/2 text-[10px] text-slate-400 font-bold">Â±</span>
                        <input type="number" oninput="calculate()" class="w-full bg-slate-50 border border-slate-100 p-3 pl-6 rounded-xl text-sm outline-none focus:ring-1 focus:ring-blue-500" placeholder="èª¿æ•´é¡">
                    </div>
                    <button onclick="removeMember('${id}')" class="text-slate-300 hover:text-red-500 transition-colors">âœ•</button>
                </div>
            `;
            document.getElementById('member-list').insertAdjacentHTML('beforeend', html);
            calculate();
        }

        function removeMember(id) {
            document.getElementById(id).remove();
            calculate();
        }

        function calculate() {
            const total = parseInt(document.getElementById('total-amount').value) || 0;
            const roundUnit = parseInt(document.getElementById('round-unit').value);
            const members = document.getElementById('member-list').children;
            const memberData = [];

            let totalAdjust = 0;
            for (let m of members) {
                const name = m.querySelector('input[type="text"]').value || `ãƒ¡ãƒ³ãƒãƒ¼${memberData.length + 1}`;
                const adjust = parseInt(m.querySelector('input[type="number"]').value) || 0;
                memberData.push({ name, adjust });
                totalAdjust += adjust;
            }

            if (memberData.length === 0) return;

            // åŸºæœ¬ã®å‰²ã‚Šå‹˜é¡ï¼ˆèª¿æ•´é¡ã‚’å¼•ã„ã¦ã‹ã‚‰äººæ•°ã§å‰²ã‚‹ï¼‰
            const baseAmount = (total - totalAdjust) / memberData.length;
            
            let resultText = "ã€ç²¾ç®—ã®ãŠçŸ¥ã‚‰ã›ã€‘\n";
            let currentTotal = 0;

            memberData.forEach(m => {
                // åŸºæœ¬é¡ + å€‹åˆ¥èª¿æ•´é¡ ã‚’ç«¯æ•°å‡¦ç†
                let finalAmount = Math.round((baseAmount + m.adjust) / roundUnit) * roundUnit;
                if (finalAmount < 0) finalAmount = 0;
                
                resultText += `${m.name}ï¼š${finalAmount.toLocaleString()}å††\n`;
                currentTotal += finalAmount;
            });

            const diff = currentTotal - total;
            const diffSign = diff >= 0 ? "+" : "";
            document.getElementById('diff-amount').innerText = `åˆè¨ˆ: ${currentTotal.toLocaleString()}å†† (å·®é¡: ${diffSign}${diff.toLocaleString()}å††)`;
            
            if (diff !== 0) {
                resultText += `\nï¼ˆç«¯æ•°èª¿æ•´ã«ã‚ˆã‚Šè¨ˆ${diffSign}${diff}å††ã®å·®é¡ãŒå‡ºã¦ã„ã¾ã™ï¼‰`;
            }
            
            document.getElementById('result-text-area').innerText = resultText;
        }

        function copyToClipboard() {
            const text = document.getElementById('result-text-area').innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼LINEã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚");
            });
        }

        // åˆæœŸãƒ¡ãƒ³ãƒãƒ¼è¿½åŠ 
        addMember('éƒ¨é•·', 2000);
        addMember('è‡ªåˆ†', 0);
        addMember('ã‚²ã‚¹ãƒˆ', -1000);
    </script>
            <div class="w-full flex flex-col items-center mt-8">
            <p class="text-[10px] text-slate-400 mb-2 font-bold uppercase tracking-widest">Sponsor Link</p>
            <div class="bg-white p-1 rounded shadow-sm">
                <script type="text/javascript">rakuten_design="slide";rakuten_affiliateId="022cbf82.9ae811c1.06d2eb59.bd2a4ff3";rakuten_items="ctsmatch";rakuten_genreId="0";rakuten_size="300x250";rakuten_target="_blank";rakuten_theme="gray";rakuten_border="off";rakuten_auto_mode="on";rakuten_genre_title="off";rakuten_recommend="on";rakuten_ts="1770128068587";</script><script type="text/javascript" src="https://xml.affiliate.rakuten.co.jp/widget/js/rakuten_widget.js?20230106"></script>
                </div>
        </div>
</body>

</html>

