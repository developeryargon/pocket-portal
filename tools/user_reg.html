<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ»ç®¡ç† - æ°´ç›£è¦–ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</title>

      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-9V96DZHTH1"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-9V96DZHTH1');
      </script>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6758339830570094" crossorigin="anonymous"></script>


    
    <style>
        :root { --main: #4A154B; --bg: #f4f7f9; --danger: #d32f2f; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; box-sizing: border-box; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        h2 { color: var(--main); margin-top: 0; text-align: center; font-size: 1.2rem; }
        label { display: block; font-size: 12px; font-weight: bold; color: #666; margin-bottom: 5px; }
        input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; margin-bottom: 20px; box-sizing: border-box; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 8px; font-weight: bold; font-size: 16px; cursor: pointer; color: white; margin-bottom: 10px; }
        .btn-reg { background: var(--main); }
        .btn-danger { background: var(--danger); font-size: 13px; margin-top: 10px; opacity: 0.8; }
        .btn-danger:hover { opacity: 1; }
        .footer-link { text-align: center; margin-top: 15px; font-size: 13px; }
        .footer-link a { color: #2196F3; text-decoration: none; }
        .note { font-size: 11px; color: #888; margin-top: -10px; margin-bottom: 20px; line-height: 1.4; }
        hr { border: 0; border-top: 1px solid #eee; margin: 20px 0; }
    </style>
</head>
<body>

<div class="card">
    <h2>ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ»ç®¡ç†</h2>
    <p class="note">åŒæœŸIDã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚æ–°è¦ã®æ–¹ã¯ç™»éŒ²ã€ã™ã§ã«ãŠæŒã¡ã®æ–¹ã¯ãƒ­ã‚°ã‚¤ãƒ³ã‚„ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ãŒå¯èƒ½ã§ã™ã€‚</p>
    
    <label>åŒæœŸID (åŠè§’è‹±æ•°å­—)</label>
    <input type="text" id="reg-gid" placeholder="ä¾‹: team-a-pool">
    
    <label>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
    <input type="password" id="reg-gpw" placeholder="4æ–‡å­—ä»¥ä¸Š">

    <button class="btn btn-reg" onclick="registerOrLogin()">ç™»éŒ²ã—ã¦é–‹å§‹ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ï¼‰</button>

    <div class="footer-link">
        <a href="pool.html">ãƒ¡ã‚¤ãƒ³ç”»é¢ã¸æˆ»ã‚‹</a>
    </div>

    <hr>
    
    <div style="text-align: center;">
        <p style="font-size: 11px; color: var(--danger); font-weight: bold; margin-bottom: 5px;">âš ï¸ ãƒ‡ãƒ¼ã‚¿ã®å…¨å‰Šé™¤</p>
        <p class="note">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€è¨­å®šã€å±¥æ­´ã‚’ã™ã¹ã¦ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å®Œå…¨ã«å‰Šé™¤ã—ã¾ã™ã€‚</p>
        <button class="btn btn-danger" onclick="deleteMyAccount()">è‡ªèº«ã«é–¢ã™ã‚‹å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤</button>
    </div>
</div>


    <!-- Bottom Ads (given) -->
<div class="bottom-ads">
  <p class="text-[10px] text-slate-400 mb-2 font-bold uppercase tracking-widest">Sponsor Link</p>
  <div class="box bg-white p-1 rounded shadow-sm">
    <script type="text/javascript">
      rakuten_design="slide";rakuten_affiliateId="022cbf82.9ae811c1.06d2eb59.bd2a4ff3";rakuten_items="ctsmatch";rakuten_genreId="0";rakuten_size="300x250";rakuten_target="_blank";rakuten_theme="gray";rakuten_border="off";rakuten_auto_mode="on";rakuten_genre_title="off";rakuten_recommend="on";rakuten_ts="1770128068587";
    </script>
    <script type="text/javascript" src="https://xml.affiliate.rakuten.co.jp/widget/js/rakuten_widget.js?20230106"></script>

    <script type="text/javascript">
      rakuten_design="slide";rakuten_affiliateId="022cbf82.9ae811c1.06d2eb59.bd2a4ff3";rakuten_items="ranking";rakuten_genreId="0";rakuten_size="300x250";rakuten_target="_blank";rakuten_theme="gray";rakuten_border="off";rakuten_auto_mode="on";rakuten_genre_title="off";rakuten_recommend="on";rakuten_ts="1770559441426";
    </script>
    <script type="text/javascript" src="https://xml.affiliate.rakuten.co.jp/widget/js/rakuten_widget.js?20230106"></script>
  </div>
</div>
</div>
  

    
<script>
    // è‡ªèº«ã®Worker URLã«æ›¸ãæ›ãˆã¦ãã ã•ã„
    const WORKER_URL = "https://pool-api.nogray.workers.dev/api";

    // ç™»éŒ²ãŠã‚ˆã³ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
    async function registerOrLogin() {
        const gid = document.getElementById('reg-gid').value.trim();
        const gpw = document.getElementById('reg-gpw').value.trim();

        if (!gid || !gpw) {
            alert("IDã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
            return;
        }

        if (gpw.length < 4) {
            alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯4æ–‡å­—ä»¥ä¸Šã«ã—ã¦ãã ã•ã„");
            return;
        }

        try {
            const response = await fetch(`${WORKER_URL}/save-config`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    gid: gid,
                    gpw: gpw,
                    configPayload: {
                        webhook: "",
                        unit_vol: "ã¥",
                        unit_time: "æ™‚",
                        created_at: new Date().toISOString(),
                        updated_at: new Date().toISOString()
                    }
                })
            });

            if (response.ok) {
                alert("èªè¨¼ãƒ»ç™»éŒ²ã«æˆåŠŸã—ã¾ã—ãŸã€‚");
                localStorage.setItem('water_gid', gid);
                localStorage.setItem('water_gpw', gpw);
                window.location.href = "pool.html";
            } else {
                const errorText = await response.text();
                alert("ã‚¨ãƒ©ãƒ¼: " + errorText);
            }
        } catch (error) {
            console.error(error);
            alert("ã‚µãƒ¼ãƒãƒ¼ã¨ã®é€šä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
        }
    }

    // å…¨ãƒ‡ãƒ¼ã‚¿å‰Šé™¤å‡¦ç†
    async function deleteMyAccount() {
        const gid = document.getElementById('reg-gid').value.trim();
        const gpw = document.getElementById('reg-gpw').value.trim();

        if (!gid || !gpw) {
            alert("å‰Šé™¤ã™ã‚‹ã«ã¯IDã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
            return;
        }

        if (!confirm("ã€è­¦å‘Šã€‘ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€è¨­å®šã€å±¥æ­´ã‚’å«ã‚€å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒå®Œå…¨ã«å‰Šé™¤ã•ã‚Œã¾ã™ã€‚å¾©å…ƒã¯ã§ãã¾ã›ã‚“ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ")) return;

        try {
            const response = await fetch(`${WORKER_URL}/delete-all-user-data`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ gid, gpw })
            });

            if (response.ok) {
                alert("å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚");
                localStorage.removeItem('water_gid');
                localStorage.removeItem('water_gpw');
                location.reload(); // å…¥åŠ›æ¬„ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹ãŸã‚ã«ãƒªãƒ­ãƒ¼ãƒ‰
            } else {
                const errorText = await response.text();
                alert("èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚IDã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\nã‚¨ãƒ©ãƒ¼: " + errorText);
            }
        } catch (e) {
            console.error(e);
            alert("é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");
        }
    }

    // ä¿å­˜ã•ã‚Œã¦ã„ã‚‹å€¤ãŒã‚ã‚Œã°è‡ªå‹•å…¥åŠ›
    window.onload = () => {
        document.getElementById('reg-gid').value = localStorage.getItem('water_gid') || '';
        document.getElementById('reg-gpw').value = localStorage.getItem('water_gpw') || '';
    };
</script>

</body>

</html>
